version: "3.1"
services:
    mongodb:
        image: mongo 
        ports:
            - "27017:27017"
        volumes:
            - "todo-app-data:/data/db"
            - "todo-app-config-data:/data/config"

    todo-api:
        build: ./todo-api-java     
        image: todo-api
        ports:
            - "8080:8080"
        environment:
            MONGODB_URL: mongodb:27017
            SPRING_LOG_LEVEL: INFO
            APP_LOG_LEVEL: DEBUG

        depends_on:
            - mongodb

volumes:
    todo-app-data:
        external: true
    todo-app-config-data:
        external: true
